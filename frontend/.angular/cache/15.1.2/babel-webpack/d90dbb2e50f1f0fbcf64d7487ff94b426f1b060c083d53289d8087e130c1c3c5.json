{"ast":null,"code":"import _asyncToGenerator from \"C:/wamp64/www/firstProject/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { finalize } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../http.service\";\nimport * as i2 from \"../Utility.Service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction LoginComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\u05E9\\u05D3\\u05D4 \\u05D7\\u05D5\\u05D1\\u05D4\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.errorMessage);\n  }\n}\nexport class LoginComponent {\n  constructor(http, utility, router) {\n    this.http = http;\n    this.utility = utility;\n    this.router = router;\n    this.loginForm = new FormGroup({\n      userName: new FormControl('', [Validators.required, Validators.minLength(2), Validators.maxLength(12)]),\n      password: new FormControl('', [Validators.required, Validators.minLength(2), Validators.maxLength(20)])\n    });\n  }\n  login() {\n    this.errorMessage = '';\n    const sub = this.http.post('login', this.loginForm.value).pipe(finalize(() => {\n      if (sub?.unsubscribe) {\n        sub.unsubscribe();\n      }\n    })).subscribe(data => {\n      if (data.status == 'error') {\n        this.errorMessage = data.message;\n      } else {\n        this.utility.setUser(data.user);\n        this.router.navigate(['']);\n      }\n    });\n  }\n  ngOnInit() {\n    if (this.utility.getUser()) {\n      this.router.navigate(['customers']);\n    }\n    // @ts-ignore\n    google.accounts.id.initialize({\n      client_id: \"327261936767-po13om2472e4p3kii0rn7bp9ualgr84a.apps.googleusercontent.com\",\n      callback: this.handleCredentialResponse.bind(this),\n      auto_select: false,\n      cancel_on_tap_outside: true\n    });\n    // @ts-ignore\n    google.accounts.id.renderButton(\n    // @ts-ignore\n    document.getElementById(\"google-button\"), {\n      theme: \"outline\",\n      size: \"large\",\n      width: \"10%\"\n    });\n    // @ts-ignore\n    google.accounts.id.prompt(notification => {});\n  }\n  handleCredentialResponse(response) {\n    return _asyncToGenerator(function* () {\n      // Here will be your response from Google.\n      console.log(response);\n    })();\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.HttpService), i0.ɵɵdirectiveInject(i2.UtilityService), i0.ɵɵdirectiveInject(i3.Router));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 24,\n  vars: 4,\n  consts: [[3, \"formGroup\"], [1, \"field\"], [1, \"fa\", \"fa-user\"], [\"type\", \"text\", \"formControlName\", \"userName\", 1, \"w3-input\", \"w3-border\", \"w3-round\"], [4, \"ngIf\"], [1, \"fa\", \"fa-asterisk\"], [\"type\", \"password\", \"formControlName\", \"password\", 1, \"w3-input\", \"w3-border\", \"w3-round\"], [\"class\", \"w3-container w3-red\", 4, \"ngIf\"], [1, \"w3-btn\", \"w3-green\", \"w3-round\", \"w3-block\", 3, \"disabled\", \"click\"], [1, \"fa\", \"fa-check\"], [\"routerLink\", \"/signup\"], [\"id\", \"google-button\", 1, \"google\"], [1, \"w3-container\", \"w3-red\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1, \"wellcome\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"form\", 0)(3, \"div\", 1)(4, \"label\");\n      i0.ɵɵelement(5, \"i\", 2);\n      i0.ɵɵtext(6, \" \\u05E9\\u05DD \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"input\", 3);\n      i0.ɵɵtemplate(8, LoginComponent_div_8_Template, 2, 0, \"div\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 1)(10, \"label\");\n      i0.ɵɵelement(11, \"i\", 5);\n      i0.ɵɵtext(12, \" \\u05E1\\u05D9\\u05E1\\u05DE\\u05D4:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"input\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(14, LoginComponent_div_14_Template, 2, 1, \"div\", 7);\n      i0.ɵɵelementStart(15, \"button\", 8);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_15_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵtext(16, \"\\u05D4\\u05EA\\u05D7\\u05D1\\u05E8\\u05D5\\u05EA \");\n      i0.ɵɵelement(17, \"i\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"p\")(19, \"a\", 10);\n      i0.ɵɵtext(20, \"\\u05DC\\u05D9\\u05E6\\u05D9\\u05E8\\u05EA \\u05D7\\u05E9\\u05D1\\u05D5\\u05DF \\u05D7\\u05D3\\u05E9\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(21, \"br\")(22, \"div\", 11);\n      i0.ɵɵtext(23, \". \");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.loginForm.controls.userName.touched && ctx.loginForm.controls.userName.status == \"INVALID\");\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", !ctx.loginForm.valid);\n    }\n  },\n  dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.FormControlName, i3.RouterLink],\n  styles: [\"h1[_ngcontent-%COMP%] {\\n  text-align: center;\\n  padding-top: 80px;\\n  color: black;\\n}\\n\\n.google[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-right: 50px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbG9naW4vbG9naW4uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFFSSxrQkFBQTtFQUNBLGlCQUFBO0VBQ0EsWUFBQTtBQURKOztBQUlBO0VBQ0ksa0JBQUE7RUFDQSxrQkFBQTtBQURKIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmgxe1xyXG4gICAgXHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBwYWRkaW5nLXRvcDogODBweDtcclxuICAgIGNvbG9yOiBibGFjaztcclxufVxyXG5cclxuLmdvb2dsZXtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIG1hcmdpbi1yaWdodDogNTBweDtcclxufVxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\", \"form[_ngcontent-%COMP%] {\\n  max-width: 400px;\\n  background: rgba(255, 255, 255, 0.8);\\n  padding: 32px;\\n  border-radius: 5px;\\n  box-shadow: 0 0 8px rgba(0, 0, 0, 0.4588235294);\\n  margin: 30px auto;\\n}\\nform[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] {\\n  margin-bottom: 12px;\\n}\\nform[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  margin: 20px 0 0 0;\\n  text-align: center;\\n  color: #2a0fc8;\\n}\\nform[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  text-decoration: none;\\n  transition: 0.3s;\\n  display: inline-block;\\n}\\nform[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\n  text-decoration: underline;\\n  scale: 1.1;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2lnbnVwL3NpZ251cC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGdCQUFBO0VBQ0Esb0NBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSwrQ0FBQTtFQUNBLGlCQUFBO0FBQ0o7QUFDSTtFQUNJLG1CQUFBO0FBQ1I7QUFFSTtFQUNJLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxjQUFBO0FBQVI7QUFFUTtFQUNJLHFCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxxQkFBQTtBQUFaO0FBQ1k7RUFDSSwwQkFBQTtFQUNBLFVBQUE7QUFDaEIiLCJzb3VyY2VzQ29udGVudCI6WyJmb3JtIHtcclxuICAgIG1heC13aWR0aDogNDAwcHg7XHJcbiAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmY2M7XHJcbiAgICBwYWRkaW5nOiAzMnB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgYm94LXNoYWRvdzogMCAwIDhweCAjMDAwMDAwNzU7XHJcbiAgICBtYXJnaW46IDMwcHggYXV0bztcclxuXHJcbiAgICAuZmllbGQge1xyXG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XHJcbiAgICB9XHJcblxyXG4gICAgcCB7XHJcbiAgICAgICAgbWFyZ2luOiAyMHB4IDAgMCAwO1xyXG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICBjb2xvcjogIzJhMGZjODtcclxuICAgIFxyXG4gICAgICAgIGEge1xyXG4gICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XHJcbiAgICAgICAgICAgIHRyYW5zaXRpb246IDAuM3M7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgICAgICAgICAgJjpob3ZlciB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcclxuICAgICAgICAgICAgICAgIHNjYWxlOiAxLjE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["FormGroup","FormControl","Validators","finalize","i0","LoginComponent","constructor","http","utility","router","userName","required","minLength","maxLength","password","login","errorMessage","sub","post","loginForm","value","pipe","unsubscribe","subscribe","data","status","message","setUser","user","navigate","ngOnInit","getUser","google","accounts","id","initialize","client_id","callback","handleCredentialResponse","bind","auto_select","cancel_on_tap_outside","renderButton","document","getElementById","theme","size","width","prompt","notification","response","console","log","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\wamp64\\www\\firstProject\\frontend\\src\\app\\login\\login.component.ts","C:\\wamp64\\www\\firstProject\\frontend\\src\\app\\login\\login.component.html"],"sourcesContent":["\r\nimport { Component } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { HttpService } from '../http.service';\r\nimport { finalize } from 'rxjs/operators';\r\nimport { UserLogin } from './login.interface';\r\nimport { UtilityService } from '../Utility.Service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n    selector: 'app-login',\r\n    templateUrl: './login.component.html',\r\n    styleUrls: ['./login.component.scss', '../signup/signup.component.scss']\r\n})\r\nexport class LoginComponent {\r\n    errorMessage?: string;\r\n\r\n    loginForm = new FormGroup({\r\n        userName: new FormControl('', [\r\n            Validators.required,\r\n            Validators.minLength(2),\r\n            Validators.maxLength(12),\r\n        ]),\r\n        password: new FormControl('', [\r\n            Validators.required,\r\n            Validators.minLength(2),\r\n            Validators.maxLength(20),\r\n        ]),\r\n    });\r\n\r\n    login() {\r\n        this.errorMessage = '';\r\n\r\n        const sub = this.http.post<UserLogin>('login', this.loginForm.value).pipe(finalize(() => {\r\n            if (sub?.unsubscribe) {\r\n                sub.unsubscribe();\r\n            }\r\n        })).subscribe(data => {\r\n            if (data.status == 'error') {\r\n                this.errorMessage = data.message;\r\n            } else {\r\n                this.utility.setUser(data.user);\r\n                this.router.navigate(['']);\r\n            }\r\n        });\r\n    }\r\n\r\n    constructor(private http: HttpService, private utility: UtilityService, private router: Router) { }\r\n\r\n\r\nngOnInit() {\r\n    if (this.utility.getUser()) {\r\n        this.router.navigate(['customers']);\r\n    }\r\n        // @ts-ignore\r\n        google.accounts.id.initialize({\r\n          client_id: \"327261936767-po13om2472e4p3kii0rn7bp9ualgr84a.apps.googleusercontent.com\",\r\n          callback: this.handleCredentialResponse.bind(this),\r\n          auto_select: false,\r\n          cancel_on_tap_outside: true,\r\n      \r\n        });\r\n        // @ts-ignore\r\n        google.accounts.id.renderButton(\r\n        // @ts-ignore\r\n        document.getElementById(\"google-button\"),\r\n          { theme: \"outline\", size: \"large\", width: \"10%\" }\r\n        );\r\n        // @ts-ignore\r\n        google.accounts.id.prompt((notification: PromptMomentNotification) => {});\r\n      }  \r\n      async handleCredentialResponse(response: any) {\r\n        // Here will be your response from Google.\r\n        console.log(response);\r\n      }\r\n  }\r\n\r\n\r\n","\r\n<h1>wellcome</h1>\r\n\r\n<form [formGroup]=\"loginForm\">\r\n    <div class=\"field\">\r\n        <label><i class=\"fa fa-user\"></i> שם משתמש:</label>\r\n        <input class=\"w3-input w3-border w3-round\" type=\"text\" formControlName=\"userName\">\r\n        <div *ngIf=\"loginForm.controls.userName.touched && loginForm.controls.userName.status == 'INVALID'\">שדה חובה</div>\r\n    </div>\r\n\r\n    <div class=\"field\">\r\n        <label><i class=\"fa fa-asterisk\"></i> סיסמה:</label>\r\n        <input class=\"w3-input w3-border w3-round\" type=\"password\" formControlName=\"password\">\r\n    </div>\r\n\r\n    <div *ngIf=\"errorMessage\" class=\"w3-container w3-red\">{{ errorMessage }}</div>\r\n\r\n    <button class=\"w3-btn w3-green w3-round w3-block\" [disabled]=\"!loginForm.valid\" (click)=\"login()\">התחברות <i class=\"fa fa-check\"></i></button>\r\n\r\n    <p>\r\n        <a routerLink=\"/signup\">ליצירת חשבון חדש</a>\r\n        \r\n    </p>\r\n    <br>\r\n    <div class=\"google\" id=\"google-button\"></div>.\r\n\r\n</form>\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}