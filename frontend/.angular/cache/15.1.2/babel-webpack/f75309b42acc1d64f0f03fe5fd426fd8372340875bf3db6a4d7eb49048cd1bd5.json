{"ast":null,"code":"import { finalize } from 'rxjs';\nimport { FormGroup, Validators, FormControl } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../http.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nconst _c0 = function (a2) {\n  return [\"/\", \"Customers\", a2];\n};\nfunction CustomersComponent_div_13_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"button\", 10);\n    i0.ɵɵelement(11, \"i\", 11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"td\")(13, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function CustomersComponent_div_13_tr_14_Template_button_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.delete(item_r3));\n    });\n    i0.ɵɵtext(14, \"x\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r3.firstName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r3.lastName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r3.phone);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r3.email);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(5, _c0, item_r3.id));\n  }\n}\nfunction CustomersComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"table\", 8)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"\\u05E9\\u05DD \\u05E4\\u05E8\\u05D8\\u05D9\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"\\u05E9\\u05DD \\u05DE\\u05E9\\u05E4\\u05D7\\u05D4\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"\\u05D8\\u05DC\\u05E4\\u05D5\\u05DF\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"\\u05D0\\u05D9\\u05DE\\u05D9\\u05D9\\u05DC\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"th\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"tbody\");\n    i0.ɵɵtemplate(14, CustomersComponent_div_13_tr_14_Template, 15, 7, \"tr\", 9);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.data);\n  }\n}\nconst _c1 = function (a1) {\n  return [\"/contacts\", a1];\n};\nconst _c2 = function (a2) {\n  return [\"/\", \"contacts\", a2];\n};\nfunction CustomersComponent_div_14_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"div\");\n    i0.ɵɵelement(2, \"img\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 17)(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 18)(7, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function CustomersComponent_div_14_div_1_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const item_r7 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.delete(item_r7));\n    });\n    i0.ɵɵtext(8, \"x\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 10);\n    i0.ɵɵelement(10, \"i\", 11);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c1, item_r7.id));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\"\", item_r7.firstName, \" \", item_r7.lastName, \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(6, _c2, item_r7.id));\n  }\n}\nfunction CustomersComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, CustomersComponent_div_14_div_1_Template, 11, 8, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.data);\n  }\n}\nexport class CustomersComponent {\n  constructor(http, router) {\n    this.http = http;\n    this.router = router;\n    this.data = [];\n    this.displayMode = 'table';\n  }\n  buildForm(item) {\n    this.Form = new FormGroup({\n      firstName: new FormControl('', [Validators.required]),\n      lastName: new FormControl('', [Validators.required]),\n      email: new FormControl('', [Validators.required]),\n      phone: new FormControl('', [Validators.required])\n    });\n  }\n  delete(item) {\n    if (!confirm('האם למחוק לקוח?')) {\n      return;\n    }\n    const sub = this.http.delete(`customers/${item.id}`).subscribe(() => {\n      const i = this.data.findIndex(x => x.id === item.id);\n      this.data.splice(i, 1);\n      sub.unsubscribe();\n    });\n  }\n  ngOnInit() {\n    const sub = this.http.get('customers').pipe(finalize(() => {\n      if (sub.unsubscribe) {\n        sub.unsubscribe();\n      }\n    })).subscribe(data => {\n      this.data = data;\n    });\n  }\n}\nCustomersComponent.ɵfac = function CustomersComponent_Factory(t) {\n  return new (t || CustomersComponent)(i0.ɵɵdirectiveInject(i1.HttpService), i0.ɵɵdirectiveInject(i2.Router));\n};\nCustomersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CustomersComponent,\n  selectors: [[\"app-customers\"]],\n  decls: 15,\n  vars: 4,\n  consts: [[1, \"displayMode\"], [\"type\", \"radio\", \"name\", \"displayMode\", \"value\", \"table\", 1, \"w3-radio\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"radio\", \"name\", \"displayMode\", \"value\", \"folders\", 1, \"w3-radio\", 3, \"ngModel\", \"ngModelChange\"], [1, \"button\"], [\"routerLink\", \"/add-customer\", 1, \"new\"], [1, \"fa\", \"far\", \"fa-plus\"], [4, \"ngIf\"], [\"class\", \"grid-container\", 4, \"ngIf\"], [1, \"w3-table\", \"w3-striped\", \"w3-bordered\"], [4, \"ngFor\", \"ngForOf\"], [1, \"w3-btn\", \"w3-round\"], [1, \"fa\", \"fa-edit\", 3, \"routerLink\"], [1, \"w3-btn\", \"w3-red\", \"w3-round\", 3, \"click\"], [1, \"grid-container\"], [\"class\", \"cardPerson\", 3, \"routerLink\", 4, \"ngFor\", \"ngForOf\"], [1, \"cardPerson\", 3, \"routerLink\"], [\"src\", \"assets/images/folder.png\", \"alt\", \"folder\", 1, \"pic\"], [1, \"container\"], [1, \"btns\"], [1, \"w3-btn\", \"w3-round\", 3, \"click\"]],\n  template: function CustomersComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"\\u05DC\\u05E7\\u05D5\\u05D7\\u05D5\\u05EA\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 0)(3, \"label\")(4, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function CustomersComponent_Template_input_ngModelChange_4_listener($event) {\n        return ctx.displayMode = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(5, \" \\u05D8\\u05D1\\u05DC\\u05D4 \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"label\")(7, \"input\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function CustomersComponent_Template_input_ngModelChange_7_listener($event) {\n        return ctx.displayMode = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(8, \" \\u05EA\\u05D9\\u05E7\\u05D9\\u05D5\\u05EA \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"div\", 3)(10, \"button\", 4);\n      i0.ɵɵtext(11, \"\\u05D4\\u05D5\\u05E1\\u05E3 \");\n      i0.ɵɵelement(12, \"i\", 5);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(13, CustomersComponent_div_13_Template, 15, 1, \"div\", 6);\n      i0.ɵɵtemplate(14, CustomersComponent_div_14_Template, 2, 1, \"div\", 7);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.displayMode);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.displayMode);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.displayMode == \"table\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.displayMode == \"folders\");\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.DefaultValueAccessor, i4.RadioControlValueAccessor, i4.NgControlStatus, i4.NgModel, i2.RouterLink],\n  styles: [\"h2[_ngcontent-%COMP%] {\\n  text-align: center;\\n  padding: 10px;\\n}\\n\\nth[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\n  text-align: center;\\n  padding: 8px;\\n  font-size: 16px;\\n}\\n\\n.new[_ngcontent-%COMP%] {\\n  background-color: #629460;\\n  margin-bottom: 20px;\\n  margin-right: 20px;\\n  border: none;\\n  border-radius: 3px;\\n  color: white;\\n  padding: 3px 10px;\\n  cursor: pointer;\\n  font-size: 5px;\\n}\\n\\n.displayMode[_ngcontent-%COMP%] {\\n  text-align: left;\\n  margin: 20px;\\n}\\n\\n.pic[_ngcontent-%COMP%] {\\n  max-height: 50px;\\n  position: relative;\\n}\\n\\n.cardPerson[_ngcontent-%COMP%] {\\n  min-width: 10px;\\n  min-height: 10px;\\n  padding: 16px;\\n  text-align: center;\\n}\\n\\n.cardPerson[_ngcontent-%COMP%]:hover {\\n  cursor: pointer;\\n}\\n\\n.grid-container[_ngcontent-%COMP%] {\\n  margin: auto;\\n  display: grid;\\n  grid-template-columns: auto auto auto auto;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY3VzdG9tZXJzL2N1c3RvbWVycy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0VBQ0EsYUFBQTtBQUNGOztBQUlBO0VBQ0Usa0JBQUE7RUFDRSxZQUFBO0VBQ0EsZUFBQTtBQURKOztBQUdFO0VBQ0UseUJBQUE7RUFDQSxtQkFBQTtFQUNBLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0VBQ0EsZUFBQTtFQUNBLGNBQUE7QUFBSjs7QUFHRTtFQUNFLGdCQUFBO0VBQ0EsWUFBQTtBQUFKOztBQUdBO0VBQ0UsZ0JBQUE7RUFDQSxrQkFBQTtBQUFGOztBQUtBO0VBRUUsZUFBQTtFQUNBLGdCQUFBO0VBQ0EsYUFBQTtFQUNBLGtCQUFBO0FBSEY7O0FBTUE7RUFDRSxlQUFBO0FBSEY7O0FBUUE7RUFDRSxZQUFBO0VBQ0EsYUFBQTtFQUNBLDBDQUFBO0FBTEYiLCJzb3VyY2VzQ29udGVudCI6WyJoMntcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgcGFkZGluZzogMTBweDtcclxuXHJcbn1cclxuXHJcblxyXG50aCwgdGQge1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIHBhZGRpbmc6IDhweDtcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICB9XHJcbiAgLm5ldyB7ICAgXHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjI5NDYwOyBcclxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBwYWRkaW5nOiAzcHggMTBweDtcclxuICAgIGN1cnNvcjogcG9pbnRlcjs7XHJcbiAgICBmb250LXNpemU6IDVweDtcclxuICB9XHJcblxyXG4gIC5kaXNwbGF5TW9kZSB7XHJcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gICAgbWFyZ2luOiAyMHB4O1xyXG59XHJcblxyXG4ucGljIHtcclxuICBtYXgtaGVpZ2h0OiA1MHB4O1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuXHJcbn1cclxuXHJcblxyXG4uY2FyZFBlcnNvbiB7XHJcbiAvLyBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gIG1pbi13aWR0aDogMTBweDtcclxuICBtaW4taGVpZ2h0OiAxMHB4O1xyXG4gIHBhZGRpbmc6IDE2cHg7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4uY2FyZFBlcnNvbjpob3ZlciB7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICBcclxufVxyXG5cclxuXHJcbi5ncmlkLWNvbnRhaW5lciB7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG4gIGRpc3BsYXk6IGdyaWQ7XHJcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiBhdXRvIGF1dG8gYXV0byBhdXRvO1xyXG5cclxufVxyXG5cclxuXHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["finalize","FormGroup","Validators","FormControl","i0","CustomersComponent","constructor","http","router","buildForm","item","Form","firstName","required","lastName","email","phone","delete","confirm","sub","id","subscribe","i","data","findIndex","x","splice","unsubscribe","ngOnInit","get","pipe","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\wamp64\\www\\firstProject\\frontend\\src\\app\\customers\\customers.component.ts","C:\\wamp64\\www\\firstProject\\frontend\\src\\app\\customers\\customers.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { finalize, Subscription } from 'rxjs';\r\nimport { HttpService } from '../http.service';\r\nimport { Router } from '@angular/router';\r\nimport { User } from './customers.interface';\r\nimport { Customer } from './add-customer/add-customers.interface';\r\nimport { FormGroup, Validators, FormControl } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-customers',\r\n  templateUrl: './customers.component.html',\r\n  styleUrls: ['./customers.component.scss']\r\n})\r\nexport class CustomersComponent {\r\n \r\n  data: User[] = [];\r\n  customer? : Customer;\r\n  Form? : FormGroup;\r\n  sub?: Subscription;\r\n  displayMode: 'table'| 'folders' = 'table';\r\n\r\n  \r\n  buildForm(item?: Customer) {\r\n    this.Form = new FormGroup({\r\n      firstName: new FormControl('',[\r\n            Validators.required,\r\n        ]),\r\n        lastName: new FormControl('',[\r\n            Validators.required,\r\n        ]),\r\n        email: new FormControl('',[\r\n            Validators.required,\r\n        ]),\r\n        phone: new FormControl('',[\r\n          Validators.required,\r\n      ]),\r\n    });\r\n}\r\n \r\n\r\n\r\n\r\ndelete(item: User) {\r\n  if (!confirm('האם למחוק לקוח?')) {\r\n      return;\r\n  }\r\n\r\n  const sub = this.http.delete<void>(`customers/${item.id}`).subscribe(() => {\r\n      const i = this.data.findIndex(x => x.id === item.id);\r\n      this.data.splice(i, 1);\r\n      sub.unsubscribe();\r\n  });\r\n}\r\n\r\n    \r\n  constructor( private http: HttpService, private router: Router) { }\r\n  \r\n  \r\n\r\n  ngOnInit(){\r\n       const sub= this.http.get<User[]>('customers').pipe(finalize(() => {\r\n          if (sub.unsubscribe){\r\n            sub.unsubscribe();\r\n          }\r\n           })).subscribe(data => {\r\n               this.data=data\r\n           })\r\n          \r\n          }\r\n\r\n}\r\n","\r\n\r\n\r\n    \r\n    <h2>לקוחות</h2>\r\n\r\n    <div class=\"displayMode\">\r\n        \r\n        <label>\r\n            <input [(ngModel)]=\"displayMode\" class=\"w3-radio\" type=\"radio\" name=\"displayMode\" value=\"table\"> טבלה\r\n        </label>\r\n        <label>\r\n            <input [(ngModel)]=\"displayMode\" class=\"w3-radio\" type=\"radio\" name=\"displayMode\" value=\"folders\"> תיקיות\r\n        </label>\r\n    </div>\r\n    \r\n\r\n    <div class=\"button\">\r\n        <button class=\"new\" routerLink=\"/add-customer\" >הוסף  <i class=\"fa far fa-plus\"></i></button>\r\n    </div>\r\n  \r\n    <div *ngIf=\"displayMode =='table'\" >\r\n    <table class=\"w3-table w3-striped w3-bordered\">\r\n        <thead>\r\n            <tr>\r\n                <th>שם פרטי</th>\r\n                <th>שם משפחה</th>\r\n                <th>טלפון</th>\r\n                <th>אימייל</th>\r\n                <th>  </th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr *ngFor=\"let item of data\">\r\n                <td>{{ item.firstName }}</td>\r\n                <td>{{ item.lastName }}</td>\r\n                <td>{{ item.phone }}</td>\r\n                <td>{{ item.email }}</td>\r\n                <td><button class=\"w3-btn  w3-round\"><i class=\"fa fa-edit\" [routerLink]=\"['/','Customers', item.id]\"></i></button></td>\r\n                <td><button class=\"w3-btn w3-red w3-round\" (click)=\"delete(item)\">x</button></td>\r\n    \r\n            </tr>\r\n        </tbody>\r\n    </table> \r\n\r\n\r\n\r\n</div>\r\n\r\n\r\n\r\n    <div class=\"grid-container\" *ngIf=\"displayMode =='folders'\" >\r\n\r\n        <div class=\"cardPerson\" *ngFor=\"let item of data; let i = index\" [routerLink]=\"['/contacts', item.id]\">\r\n      <div><img class=\"pic\" src=\"assets/images/folder.png\" alt=\"folder\" ></div>\r\n      <div class=\"container\">\r\n        <p>{{item.firstName}} {{item.lastName}}</p>\r\n       \r\n        \r\n        <div class=\"btns\">\r\n            <button class=\"w3-btn  w3-round\"  (click)=\"delete(item)\">x</button>\r\n            <button class=\"w3-btn  w3-round\"> <i class=\"fa fa-edit\" [routerLink]=\"['/','contacts', item.id]\"></i></button>\r\n      </div>\r\n    </div>\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}